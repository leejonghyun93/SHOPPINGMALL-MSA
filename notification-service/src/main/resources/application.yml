# ========================================
# ğŸ  ì•Œë¦¼ ì„œë¹„ìŠ¤ ë¡œì»¬ ê°œë°œ ì„¤ì • (ìˆ˜ì •ë¨)
# ========================================

server:
  port: 8096

spring:
  application:
    name: NOTIFICATION-SERVICE

  # ===== Config Server ì—°ê²° =====
  config:
    import: "optional:configserver:http://localhost:8888"
    timeout: 3000ms
    fail-fast: false  # Config Server ì‹¤íŒ¨í•´ë„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘
    retry:
      initial-interval: 1000ms
      max-attempts: 3
      max-interval: 2000ms
      multiplier: 1.2

  # ===== ë¡œì»¬ ì´ë©”ì¼ ì„¤ì • (Gmail ì‚¬ìš©) =====
  mail:
    host: smtp.gmail.com
    port: 587
    username: ${MAIL_USERNAME}           # ğŸ”’ í™˜ê²½ë³€ìˆ˜ë¡œ ì„¤ì •
    password: ${MAIL_PASSWORD}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true

  jpa:
    hibernate:
      ddl-auto: create-drop  # ë¡œì»¬ ê°œë°œì‹œ í…Œì´ë¸” ìë™ ìƒì„±
    database-platform: org.hibernate.dialect.H2Dialect
    show-sql: true
    properties:
      hibernate:
        format_sql: true

  # ===== ë¡œì»¬ Kafka ì„¤ì • (ê¸°ë³¸ê°’) =====
  kafka:
    bootstrap-servers: localhost:9092
    consumer:
      group-id: notification-group-local
      auto-offset-reset: latest
    producer:
      retries: 0  # ë¡œì»¬ì—ì„œëŠ” ì¬ì‹œë„ ì•ˆí•¨

# ===== ğŸ”¥ ìˆ˜ì •ëœ ë¡œì»¬ ê°œë°œìš© ì„¤ì • =====
notification:
  email:
    enabled: true  # ğŸ”¥ ì´ë©”ì¼ í™œì„±í™”
    from-email: "fhohffodf93@gmail.com"  # ì‹¤ì œ ë°œì†¡ ì´ë©”ì¼
    from-name: "Local Dev Notification"
    retry-count: 1
    retry-delay: 2000
  websocket:
    enabled: true
  batch:
    enabled: true  # ğŸ”¥ ë°°ì¹˜ í™œì„±í™” (í…ŒìŠ¤íŠ¸ìš©)
    reminder-job-cron: "0 */1 * * * *"  # 1ë¶„ë§ˆë‹¤ ì‹¤í–‰ (í…ŒìŠ¤íŠ¸ìš©)

external-services:
  user-service-detail-url: "http://localhost:8081/api/users"
  broadcast-service-url: "http://localhost:8082/api/broadcasts"
  frontend-base-url: "http://localhost:3000"
  unsubscribe-url: "http://localhost:3000/unsubscribe"

# ===== Eureka ì„¤ì • =====
eureka:
  instance:
    hostname: localhost
    prefer-ip-address: true
    instance-id: ${spring.application.name}:${server.port}
  client:
    register-with-eureka: true
    fetch-registry: true
    service-url:
      defaultZone: http://localhost:8761/eureka

# ===== ë¡œì»¬ ê°œë°œìš© JWT =====
jwt:
  secret-key: localDevSecretKeyForTestingOnly123456

# ===== ë¡œì»¬ ê°œë°œìš© ë¡œê¹… =====
logging:
  level:
    org.kosa.notificationservice: DEBUG
    org.springframework.mail: DEBUG  # ğŸ”¥ ë©”ì¼ ë¡œê·¸ ë ˆë²¨ DEBUGë¡œ ë³€ê²½
    org.springframework.kafka: WARN
    org.springframework.web: INFO
    org.kosa.notificationservice.service.EmailService: DEBUG  # ì´ë©”ì¼ ì„œë¹„ìŠ¤ ë””ë²„ê·¸
    root: INFO

# ===== ê°œë°œìš© ê´€ë¦¬ ì—”ë“œí¬ì¸íŠ¸ =====
management:
  endpoints:
    web:
      exposure:
        include: health,info,refresh,h2-console
      base-path: /actuator
  endpoint:
    health:
      show-details: always
  security:
    enabled: false